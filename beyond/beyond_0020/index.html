<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Beyond the good ol&#39; LaunchAgents - 20 - Terminal Preferences · theevilbit blog
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Csaba Fitzl">
<meta name="description" content="
This is part 20 in the series of &ldquo;Beyond the good ol&rsquo; LaunchAgents&rdquo;, where I try to collect various persistence techniques for macOS. For more background check the introduction.
This is another application specific persistence method, related to the Terminal application.
In the Terminal Preferences, under the Profiles tab, we can set a command that will be executed upon Terminal&rsquo;s startup. This is shown in the screen below.
">
<meta name="keywords" content="blog,macos,apple,security,vulnerability,exploit,cve">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Beyond the good ol&#39; LaunchAgents - 20 - Terminal Preferences">
  <meta name="twitter:description" content="This is part 20 in the series of “Beyond the good ol’ LaunchAgents”, where I try to collect various persistence techniques for macOS. For more background check the introduction.
This is another application specific persistence method, related to the Terminal application.
In the Terminal Preferences, under the Profiles tab, we can set a command that will be executed upon Terminal’s startup. This is shown in the screen below.">

<meta property="og:url" content="https://theevilbit.github.io/beyond/beyond_0020/">
  <meta property="og:site_name" content="theevilbit blog">
  <meta property="og:title" content="Beyond the good ol&#39; LaunchAgents - 20 - Terminal Preferences">
  <meta property="og:description" content="This is part 20 in the series of “Beyond the good ol’ LaunchAgents”, where I try to collect various persistence techniques for macOS. For more background check the introduction.
This is another application specific persistence method, related to the Terminal application.
In the Terminal Preferences, under the Profiles tab, we can set a command that will be executed upon Terminal’s startup. This is shown in the screen below.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="beyond">
    <meta property="article:published_time" content="2021-09-22T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-09-22T00:00:00+00:00">
    <meta property="article:tag" content="Macos">
    <meta property="article:tag" content="Persistence">
    <meta property="article:tag" content="Beyond">




<link rel="canonical" href="https://theevilbit.github.io/beyond/beyond_0020/">


<link rel="preload" href="https://theevilbit.github.io/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://theevilbit.github.io/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://theevilbit.github.io/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="https://theevilbit.github.io/css/coder.min.b886fe0d9034709648f91f4ce178f51dd367d9350f82dd1132d54fd69bfca66f.css" integrity="sha256-uIb&#43;DZA0cJZI&#43;R9M4Xj1HdNn2TUPgt0RMtVP1pv8pm8=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="https://theevilbit.github.io/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="https://theevilbit.github.io/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="https://theevilbit.github.io/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://theevilbit.github.io/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="https://theevilbit.github.io/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://theevilbit.github.io/images/apple-touch-icon.png">

<link rel="manifest" href="https://theevilbit.github.io/site.webmanifest">
<link rel="mask-icon" href="https://theevilbit.github.io/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://theevilbit.github.io/">
      theevilbit blog
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://theevilbit.github.io/posts/">Posts</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://theevilbit.github.io/talks/">Talks and Workshops</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://theevilbit.github.io/shield/">Shield.app</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://theevilbit.github.io/beyond/">Beyond good ol&#39; LaunchAgents</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://theevilbit.github.io/tags/">Tags</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://theevilbit.github.io/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="https://theevilbit.github.io/beyond/beyond_0020/">
          Beyond the good ol&#39; LaunchAgents - 20 - Terminal Preferences
        </a>
      </h1>
    </header>

    <blockquote>
<p>This is part 20 in the series of &ldquo;Beyond the good ol&rsquo; LaunchAgents&rdquo;, where I try to collect various persistence techniques for macOS. For more background check the <a href="https://theevilbit.github.io/beyond/beyond_intro/"  class="external-link" target="_blank" rel="noopener">introduction</a>.</p></blockquote>
<p>This is another application specific persistence method, related to the Terminal application.</p>
<p>In the Terminal Preferences, under the Profiles tab, we can set a command that will be executed upon Terminal&rsquo;s startup. This is shown in the screen below.</p>
<p><img src="https://theevilbit.github.io/images/beyond/beyond_0020_0.png" alt="Terminal Profile Settings"></p>
<p>This is stored inside Terminal&rsquo;s preferences PLIST file, located at  <code>~/Library/Preferences/com.apple.Terminal.plist</code>. Normally this is a binary PLIST, and thus we can use <code>plutil</code> to display it in a human readable form.</p>
<pre tabindex="0"><code>csaby@mac Preferences % plutil -p com.apple.Terminal.plist| less
{
  &#34;Default Window Settings&#34; =&gt; &#34;Basic&#34;
  &#34;DefaultProfilesVersion&#34; =&gt; 1
  &#34;HasMigratedDefaults&#34; =&gt; 1
  &#34;Man Page Window Settings&#34; =&gt; &#34;Man Page&#34;
  &#34;NSNavLastRootDirectory&#34; =&gt; &#34;~/Documents&#34;
  &#34;NSNavLastUserSetHideExtensionButtonState&#34; =&gt; 0
  &#34;NSWindow Frame NSNavPanelAutosaveName&#34; =&gt; &#34;732 711 328 167 0 0 1792 1095 &#34;
  &#34;NSWindow Frame TTAppPreferences&#34; =&gt; &#34;563 437 668 554 0 0 1792 1095 &#34;
  &#34;NSWindow Frame TTWindow&#34; =&gt; &#34;132 206 1522 805 0 0 1792 1095 &#34;
  &#34;NSWindow Frame TTWindow Basic&#34; =&gt; &#34;132 178 1522 833 0 0 1792 1095 &#34;
  &#34;NSWindow Frame TTWindow Man Page&#34; =&gt; &#34;59 152 570 707 0 0 1792 1095 &#34;
  &#34;NSWindow Frame TTWindow test&#34; =&gt; &#34;61 555 934 561 0 0 1920 1177 &#34;
  &#34;NSWindow Frame TTWindow test 1&#34; =&gt; &#34;76 310 585 365 0 0 1792 1097 &#34;
  &#34;ProfileCurrentVersion&#34; =&gt; 2.07
  &#34;SecureKeyboardEntry&#34; =&gt; 0
  &#34;Shell&#34; =&gt; &#34;&#34;
  &#34;Startup Window Settings&#34; =&gt; &#34;Basic&#34;
  &#34;TTAppPreferences Selected Tab&#34; =&gt; 1
  &#34;Window Settings&#34; =&gt; {
    &#34;Basic&#34; =&gt; {
      &#34;CommandString&#34; =&gt; &#34;touch /Users/Shared/executed.txt;&#34;
...
</code></pre><p>As we can see above, the setting is stored under the &ldquo;Window Settings&rdquo; -&gt; Basic (which is the name of the profile) -&gt; &ldquo;CommandString&rdquo;. The Startup profile is set under &ldquo;Startup Window Settings&rdquo;. Which is important, because the command associated with the Startup profile will be executed.</p>
<p>In XML it looks like the following:</p>
<pre tabindex="0"><code>csaby@mac Preferences % plutil -convert xml1 com.apple.Terminal.plist -o -| less 
...
        &lt;key&gt;Startup Window Settings&lt;/key&gt;
        &lt;string&gt;Basic&lt;/string&gt;
...
        &lt;key&gt;Window Settings&lt;/key&gt;
        &lt;dict&gt;
                &lt;key&gt;Basic&lt;/key&gt;
                &lt;dict&gt;
                        &lt;key&gt;CommandString&lt;/key&gt;
                        &lt;string&gt;touch /Users/Shared/executed.txt;&lt;/string&gt;
...
</code></pre><p>If we are not sandboxed, we can write to this file, and whenever a user starts Terminal our command will be executed.</p>

  </article>
</section>

  

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2025
     Csaba Fitzl 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="https://theevilbit.github.io/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
